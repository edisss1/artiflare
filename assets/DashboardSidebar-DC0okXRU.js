import{j as e,r as i,u as C,B as p,V as W,t as b,W as q,D as M,L as B,X as P,Y as J,a as j,U as Y,Z as X,_,$ as D,F as E,a0 as G,a1 as K,a2 as V,C as ee,p as te,y as R,a3 as ae,x as re,q as se,v as le,w as ne,a4 as oe,a5 as ie,a6 as de,a7 as F,a8 as ce,T as he,a9 as I,e as pe,aa as xe}from"./index-ChT_ZIC7.js";import{f as me,S as A,A as ue,C as ge,U as fe}from"./UserCard-BVNH5PxE.js";import{T as ye,E as be,C as je,v as $,U as ve}from"./User-BTfkkXQg.js";import{M as H,C as Ce}from"./Modal-axEZC8xA.js";import{S as ke}from"./SettingsInput-BYHTNiKU.js";import{F as we}from"./FallbackAvatar-CZd8nXZJ.js";import{B as O}from"./BurgerMenuIcon-CmL8fPqj.js";const nt=({children:t})=>e.jsx("div",{className:"w-full py-4 px-8",children:t}),Q=({fill:t})=>e.jsx("svg",{className:`[&>*]:stroke-bg-dark dark:[&>*]:stroke-bg-light ${t}`,width:"20",height:"20",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8.33893 1.86439C8.54838 1.37167 8.65314 1.1253 8.79898 1.04944C8.92564 0.983521 9.07438 0.983521 9.20104 1.04944C9.34688 1.1253 9.45164 1.37167 9.66108 1.86439L11.3294 5.78904C11.3914 5.9347 11.4223 6.00753 11.4702 6.0633C11.5126 6.11266 11.5644 6.15213 11.6222 6.17915C11.6876 6.2097 11.7633 6.21806 11.9145 6.2348L15.9897 6.68581C16.5013 6.74243 16.757 6.77074 16.8709 6.89273C16.9698 6.99869 17.0158 7.14706 16.9952 7.29377C16.9715 7.46263 16.7804 7.64317 16.3982 8.00433L13.3541 10.8809C13.2412 10.9877 13.1847 11.0411 13.1489 11.1061C13.1173 11.1636 13.0975 11.2275 13.0909 11.2935C13.0833 11.3682 13.0991 11.4462 13.1307 11.6022L13.9809 15.8056C14.0877 16.3333 14.1411 16.5971 14.0656 16.7484C14 16.8799 13.8797 16.9715 13.7403 16.9963C13.5798 17.0247 13.3569 16.89 12.9113 16.6205L9.36162 14.4736C9.2299 14.3939 9.16403 14.3542 9.09401 14.3385C9.03204 14.3248 8.96798 14.3248 8.90601 14.3385C8.83598 14.3542 8.77012 14.3939 8.63839 14.4736L5.08876 16.6205C4.64312 16.89 4.4203 17.0247 4.25979 16.9963C4.12037 16.9715 4 16.8799 3.93446 16.7484C3.85902 16.5971 3.91239 16.3333 4.01914 15.8056L4.86935 11.6022C4.90091 11.4462 4.91669 11.3682 4.9092 11.2935C4.90256 11.2275 4.88278 11.1636 4.85111 11.1061C4.81533 11.0411 4.75884 10.9877 4.64587 10.8809L1.60185 8.00433C1.21969 7.64317 1.0286 7.46263 1.00484 7.29377C0.984216 7.14706 1.03018 6.99869 1.12911 6.89273C1.24299 6.77074 1.4988 6.74243 2.01042 6.68581L6.08551 6.2348C6.23676 6.21806 6.31238 6.2097 6.37777 6.17915C6.43563 6.15213 6.48743 6.11266 6.52983 6.0633C6.57773 6.00753 6.60869 5.9347 6.67062 5.78904L8.33893 1.86439Z",stroke:"#333333",strokeLinecap:"round",strokeLinejoin:"round"})}),Ne=({popoverRef:t,isPopoverOpen:a,setIsPopoverOpen:r,content:l})=>{const d=s=>{t.current&&!t.current.contains(s.target)&&r(!1)};return i.useEffect(()=>(document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}),[]),e.jsx("div",{className:`${a?"flex flex-col items-center":"hidden"} absolute top-full left-[50%]  -translate-x-[60%] bg-primary dark:bg-primary-dark p-4 w-[200px] shadow-lg rounded-lg`,ref:t,onClick:()=>r(!a),children:e.jsx("div",{children:a&&e.jsx("div",{children:l})})})},Te=({boardID:t,openBoardRenameModal:a,copyToClipboard:r})=>{const l=C();return e.jsxs("div",{className:"flex flex-col gap-4 z-0",children:[e.jsxs(p,{className:"flex gap-2 items-center",onClick:()=>l(W(t)),children:[e.jsx(ye,{}),e.jsx("p",{children:b("deleteBoard")})]}),e.jsxs(p,{onClick:a,className:"flex gap-2 items-center",children:[e.jsx(be,{className:" [&>*]:fill-bg-dark dark:[&>*]:fill-bg-light"}),e.jsx("p",{children:b("renameBoard")})]}),e.jsxs(p,{onClick:r,className:"flex gap-2 items-center ",children:[e.jsx(je,{}),e.jsxs("p",{children:[" ",b("copyBoardLink")," "]})]})]})};function Be(t,a){a(!t)}const Me=()=>e.jsxs("svg",{className:"[&>*]:fill-bg-dark dark:[&>*]:fill-bg-light",width:"20",height:"15",viewBox:"0 0 14 4",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"2",cy:"2",r:"2",fill:"#333333"}),e.jsx("circle",{cx:"7",cy:"2",r:"2",fill:"#333333"}),e.jsx("circle",{cx:"12",cy:"2",r:"2",fill:"#333333"})]}),Ie=({boardID:t,modalRef:a})=>{const r=C(),[l,d]=i.useState(""),s=n=>{d(n.target.value)};return e.jsxs("div",{className:"flex flex-col items-center mt-8 gap-4",children:[e.jsx("h2",{className:"font-medium text-xl",children:"Rename board"}),e.jsx(ke,{id:"",label:"",type:"text",value:l,onChange:n=>s(n)}),e.jsx(p,{onClick:()=>{r(q({boardID:t,newBoardTitle:l})),a.current?.close(),d("")},className:"border-2 border-typography-light dark:border-typography-dark px-2 py-1 rounded-lg hover:bg-typography-light hover:text-typography-dark transition-colors duration-150 dark:hover:bg-typography-dark dark:hover:text-typography-light",children:"Rename"})]})},Se=({id:t,title:a,createdBy:r,modifiedBy:l,updatedAt:d,isFavorite:s})=>{const n=C(),h=i.useRef(null),[o,f]=i.useState(!1),u=window.innerWidth,{t:k}=M(),g=i.useRef(null),[c,x]=i.useState(!1),v=async()=>{try{const w=`${window.location.origin}/artiflare`.replace(/\/$/,""),N=window.location.hash.startsWith("#")?"/#":"#",T=`${w}${N}/app/board/${t}`;await navigator.clipboard.writeText(T),x(!0)}catch(w){console.error("Error copying to clipboard:",w)}setTimeout(()=>x(!1),3e3)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:` flex ${o?"z-40":"z-0"}   flex-col relative border-2 gap-2 px-4 py-2 group hover:bg-primary dark:hover:bg-primary-dark/70 dark:hover:text-typography-dark    transition-colors duration-150 border-typography-light dark:border-typography-dark/40 rounded-md`,children:[e.jsx(B,{className:"max-w-[200px] truncate text-lg",to:`/app/board/${t}`,children:a}),e.jsxs("div",{className:"flex max-lg:flex-col gap-2 max-xl:flex-col ",children:[e.jsxs("p",{className:"max-w-[200px] truncate",children:[k("createdBy")," ",r,","]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("p",{className:"max-w-[400px] truncate text-nowrap max-md:text-balance ",children:[k("modified")," ",me(d).toLowerCase()," ",k("by")," ",l]})})]}),e.jsxs("div",{className:`absolute top-[50%] right-4 -translate-y-[50%] flex items-center gap-4  ${o||u<1024?"opacity-100 pointer-events-auto":"opacity-0 "} max-xl:opacity-100 group-hover:opacity-100 transition-opacity duration-150`,children:[e.jsx(p,{onClick:()=>n(s?J(t):P(t)),className:"hover:bg-typography-dark/10 transition-colors duration-150 w-8 h-8 flex items-center justify-center rounded-sm ",children:e.jsx(Q,{fill:`${s?"fill-typography-light dark:fill-typography-dark ":""}`})}),e.jsx(p,{onClick:()=>Be(o,f),className:"relative hover:bg-typography-dark/10 transition-colors duration-150 w-8 h-8 flex items-center justify-center rounded-sm",children:e.jsx(Me,{})}),e.jsx(Ne,{popoverRef:h,isPopoverOpen:o,setIsPopoverOpen:f,content:e.jsx(Te,{copyToClipboard:v,openBoardRenameModal:()=>g.current?.showModal(),boardID:t})})]})]}),e.jsx(H,{minHeight:"",modalRef:g,children:e.jsx(Ie,{boardID:t,modalRef:g})}),e.jsx("div",{className:`${c?"translate-y-0":"translate-y-[500px]"} bg-primary rounded-lg border-2 border-typography-light dark:border-typography-dark dark:bg-primary-dark px-4 py-2 fixed bottom-4 left-[55%] self-center text-center max-w-[300px] w-full transform -translate-x-1/2 transition-transform duration-1000  `,children:e.jsx("span",{className:"text-center",children:"Link copied to clipboard"})})]})},Le=({totalPages:t,currentPage:a,setCurrentPage:r})=>{const l=s=>{r(s)},d=()=>{const s=[],h="...";if(t<=3)for(let o=1;o<=t;o++)s.push(o);else if(a<=3){for(let o=1;o<=3;o++)s.push(o);s.push(h),s.push(t)}else if(a>=t-2){s.push(1),s.push(h);for(let o=t-2;o<=t;o++)s.push(o)}else{s.push(1),s.push(h);for(let o=a-1;o<=a+1;o++)s.push(o);s.push(h),s.push(t)}return s};return e.jsxs("div",{className:"flex gap-2 w-full items-center  justify-center absolute bottom-0 max-lg:bg-bg-light max-lg:dark:bg-bg-dark",children:[a!==1&&e.jsx(p,{className:"border-2  border-typography-light px-4 py-1 rounded-md hover:bg-bg-dark dark:hover:bg-bg-light dark:hover:text-typography-light hover:text-typography-dark transition-all duration-150",onClick:()=>l(a-1),children:"Previous"}),d().map((s,n)=>s==="..."?e.jsx("span",{className:"text-typography-light row-start-1 dark:text-typography-dark",children:"..."},n):e.jsx(p,{onClick:()=>l(s),className:`${a===s&&"bg-bg-dark row-start-1 dark:bg-bg-light dark:text-typography-light text-typography-dark"} w-8 aspect-square flex items-center justify-center rounded-md `,children:s},n)),a!==t&&e.jsx(p,{className:"border-2 border-typography-light px-4 py-1 rounded-md hover:bg-bg-dark dark:hover:bg-bg-light dark:hover:text-typography-light hover:text-typography-dark transition-all duration-150",onClick:()=>l(a+1),children:"Next"})]})},ot=({boards:t})=>{const a=C(),{user:r}=j(c=>c.auth),[l,d]=i.useState(1),s=j(c=>c.boards.boardsPerPage),{sortedBy:n,boardSearchQuery:h}=j(c=>c.boards),o=Math.ceil(t.length/s),f=window.innerWidth,u=i.useMemo(()=>{const c=[...t];switch(n){case"last-opened":return c.sort((x,v)=>x.updatedAt>v.updatedAt?-1:1);case"newest-first":return c.sort((x,v)=>x.updatedAt>v.updatedAt?-1:1);case"oldest-first":return c.sort((x,v)=>x.updatedAt<v.updatedAt?-1:1);default:return c.sort((x,v)=>x.updatedAt<v.updatedAt?-1:1)}},[n,t]),k=i.useMemo(()=>u.filter(c=>c.boardTitle.includes(h)),[h,t]),g=i.useMemo(()=>{const c=(l-1)*s,x=c+s;return k?.slice(c,x)},[l,s,t]);return i.useEffect(()=>{if(r){const c=a(Y(r.uid));return()=>c()}},[]),i.useEffect(()=>{a(X(u))},[n,a]),i.useEffect(()=>{f<=1280&&a(_(2))},[f]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 relative min-h-[420px] max-lg:min-h-[300px]",children:[g?.length===0&&e.jsx("p",{className:"text-center text-sm font-normal opacity-70 mt-8 ",children:b("noBoards")}),g?.map(c=>e.jsx(Se,{isFavorite:c.isFavorite,createdBy:c.createdBy,updatedAt:c.updatedAt,id:c.id,modifiedBy:c.modifiedBy,title:c.boardTitle},c.id)),o>1&&e.jsx(Le,{totalPages:o,currentPage:l,setCurrentPage:d})]})})},Ee="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1%206H11M6%201V11'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",He="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.244%2011.7584C13.7434%2011.2574%2013.1584%2010.8485%2012.516%2010.5504C13.422%209.81641%2014%208.69641%2014%207.44042C14%205.22444%2012.152%203.40645%209.93599%203.44045C7.754%203.47445%205.99601%205.25244%205.99601%207.44042C5.99601%208.69641%206.57601%209.81641%207.48%2010.5504C6.83742%2010.8483%206.25245%2011.2572%205.75201%2011.7584C4.66002%2012.8524%204.04002%2014.2964%204.00002%2015.8364C3.99949%2015.8577%204.00324%2015.879%204.01104%2015.8988C4.01884%2015.9187%204.03054%2015.9368%204.04545%2015.9521C4.06036%2015.9674%204.07818%2015.9795%204.09786%2015.9878C4.11753%2015.9961%204.13867%2016.0004%204.16002%2016.0004H5.28002C5.36602%2016.0004%205.43802%2015.9324%205.44002%2015.8464C5.47802%2014.6864%205.94801%2013.6004%206.77401%2012.7764C7.19668%2012.3515%207.69944%2012.0146%208.25318%2011.7853C8.80692%2011.5559%209.40064%2011.4387%209.99999%2011.4404C11.218%2011.4404%2012.364%2011.9144%2013.226%2012.7764C14.05%2013.6004%2014.52%2014.6864%2014.56%2015.8464C14.562%2015.9324%2014.634%2016.0004%2014.72%2016.0004H15.84C15.8613%2016.0004%2015.8824%2015.9961%2015.9021%2015.9878C15.9218%2015.9795%2015.9396%2015.9674%2015.9545%2015.9521C15.9694%2015.9368%2015.9811%2015.9187%2015.9889%2015.8988C15.9967%2015.879%2016.0005%2015.8577%2015.9999%2015.8364C15.96%2014.2964%2015.34%2012.8524%2014.244%2011.7584ZM9.99999%2010.0004C9.31599%2010.0004%208.672%209.73441%208.19%209.25041C7.94811%209.01042%207.75703%208.72417%207.62818%208.40873C7.49932%208.0933%207.43532%207.75513%207.44%207.41442C7.446%206.75843%207.708%206.12443%208.166%205.65443C8.646%205.16244%209.28799%204.88844%209.97399%204.88044C10.652%204.87444%2011.31%205.13844%2011.794%205.61243C12.29%206.09843%2012.562%206.74843%2012.562%207.44042C12.562%208.12442%2012.296%208.76641%2011.812%209.25041C11.5745%209.489%2011.2921%209.67813%2010.9811%209.80687C10.6701%209.93561%2010.3366%2010.0014%209.99999%2010.0004ZM4.99002%207.96842C4.97202%207.79442%204.96202%207.61842%204.96202%207.44042C4.96202%207.12242%204.99202%206.81243%205.04802%206.51043C5.06202%206.43843%205.02402%206.36443%204.95802%206.33443C4.68602%206.21243%204.43602%206.04443%204.22002%205.83243C3.9655%205.58565%203.76522%205.28852%203.63196%204.96C3.49869%204.63149%203.43537%204.2788%203.44603%203.92444C3.46403%203.28245%203.72203%202.67245%204.17202%202.21246C4.66602%201.70646%205.33002%201.43046%206.03601%201.43846C6.67401%201.44446%207.29%201.69046%207.756%202.12646C7.914%202.27446%208.05%202.43845%208.164%202.61445C8.204%202.67645%208.282%202.70245%208.35%202.67845C8.702%202.55645%209.07399%202.47045%209.45599%202.43045C9.56799%202.41845%209.63199%202.29845%209.58199%202.19846C8.93199%200.912463%207.604%200.0244691%206.06801%200.000469272C3.85003%20-0.0335305%202.00204%201.78446%202.00204%203.99844C2.00204%205.25444%202.58003%206.37443%203.48603%207.10842C2.85003%207.40242%202.26404%207.80842%201.75604%208.31642C0.660046%209.41041%200.0400498%2010.8544%205.00117e-05%2012.3964C-0.000483795%2012.4177%200.00326024%2012.439%200.0110616%2012.4588C0.018863%2012.4787%200.0305638%2012.4968%200.0454745%2012.5121C0.0603853%2012.5274%200.0782045%2012.5396%200.0978819%2012.5478C0.117559%2012.5561%200.138697%2012.5604%200.160049%2012.5604H1.28204C1.36804%2012.5604%201.44004%2012.4924%201.44204%2012.4064C1.48004%2011.2464%201.95004%2010.1604%202.77603%209.33641C3.36403%208.74841%204.08402%208.34042%204.87002%208.14242C4.94802%208.12242%205.00002%208.04842%204.99002%207.96842Z'%20fill='black'/%3e%3c/svg%3e",Ae=({title:t,setTitle:a,createBoard:r,isChecked:l,setIsChecked:d})=>{const s=i.useRef(null),[n,h]=i.useState(!1);return i.useEffect(()=>{$(t,h)},[t]),i.useEffect(()=>{s.current&&(s.current.setCustomValidity(""),s.current.reportValidity())},[t]),e.jsxs("div",{className:"flex flex-col gap-6 bg-bg-light dark:bg-bg-dark text-typography-light dark:text-typography-dark",children:[e.jsx("h2",{className:"text-xl text-center  ",children:b("createNewBoard")}),e.jsx("div",{className:"w-full max-w-[80%] mx-auto flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col gap-4 items-start",children:[e.jsx("input",{ref:s,className:"p-2 w-full max-w-[300px] bg-transparent border-2 border-typography-light dark:border-typography-dark rounded-md modal-input",minLength:4,type:"text",placeholder:b("boardTitle"),value:t,onChange:a,required:!0}),!n||t.length<4&&e.jsx("p",{className:"text-danger text-wrap max-w-[300px] w-full",children:b("boardTitleWarning")}),e.jsxs("div",{className:" flex gap-2 items-center justify-center ",children:[e.jsx("input",{checked:l,onChange:d,type:"checkbox",className:"accent-secondary "}),e.jsx("p",{children:"Board available for all team members"})]})]})}),e.jsx(p,{disabled:!n||t.length<4,onClick:r,className:"absolute bottom-6 disabled:opacity-70 disabled:hover:bg-transparent disabled:select-none mt-8 px-6 py-2 border-2 border-typography-light dark:border-typography-dark hover:bg-secondary  w-fit self-center transition-colors duration-150 rounded-lg",children:b("create")})]})},U=({cursor:t="cursor-pointer",name:a,id:r,onClick:l})=>e.jsxs(p,{type:"button",onClick:()=>l&&l(r),className:`${t} flex gap-2 items-center`,children:[e.jsx(we,{width:"w-8",height:"h-8",rounded:"rounded-full",username:a}),e.jsx("p",{children:a})]}),Re=({teamResults:t,setAddedTeam:a})=>{const r=C();return e.jsx("div",{className:"w-full absolute top-full bg-primary px-4 py-2 rounded-b-lg flex flex-col gap-4 max-h-[200px] overflow-y-auto",children:t.map(l=>e.jsx(U,{onClick:()=>{a(l),console.log(`Team was added: ${l.id}`),r(D())},id:l.id,name:l.name},l.id))})},Fe=({setIsCreateModal:t,modalRef:a})=>{const r=C(),{teamQueryResults:l,teamResults:d}=j(x=>x.teamManagement),[s,n]=i.useState(""),[h,o]=i.useState(null),{user:f}=j(x=>x.auth),u=()=>{t(!0)},k=x=>{x.preventDefault(),r(G({queryStr:s})).then(()=>{l&&r(K(l))}),n("")},g=()=>{n(""),r(D())};i.useEffect(()=>{const x=a.current;return x&&x.addEventListener("close",g),()=>{x?.removeEventListener("close",g)}},[]);const c=()=>{h&&f&&(V(h.id,f.uid),a.current?.close())};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"font-medium text-xl text-center mb-6",children:b("joinATeam")}),e.jsxs("form",{onSubmit:k,className:"flex flex-col items-center w-full max-w-[300px]   ",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center  w-full max-w-[300px] relative ",children:[e.jsx(E,{id:"team-search-input",className:"col-start-1 col-span-3 row-start-1 border-r-0 rounded-r-none  ",value:s,onChange:x=>n(x.target.value),placeholder:"Search teams by name or ID",type:"text",autoComplete:"off"}),e.jsx(p,{type:"submit",className:"bg-bg-light dark:bg-bg-dark  z-40 row-start-1 px-3  h-full border-2 border-l-0 rounded-r-lg border-typography-light dark:border-typography-dark  ",children:e.jsx(A,{className:"w-6 h-6"})}),d.length>0&&e.jsx(Re,{setAddedTeam:o,teamResults:d})]}),e.jsx("div",{className:"w-full my-4 flex  items-center justify-center",children:h&&e.jsx(U,{onClick:()=>{},cursor:"cursor-default",id:h.id,name:h.name})}),h&&e.jsx("p",{className:"text-sm text-danger",children:"You can add only 1 team at a time"}),e.jsxs("div",{className:"flex flex-col mt-6 gap-6 items-center",children:[e.jsx("p",{children:b("dontHaveATeam")}),e.jsx(p,{type:"button",onClick:u,className:"relative  dark:border-typography-dark after:content-[''] after:w-full after:h-px after:bg-typography-light dark:after:bg-typography-dark after:scale-x-0 hover:after:scale-x-100 after:transform after:origin-center after:transition-all duration-300 after:absolute after:top-full after:left-0",children:b("createOne")})]})]}),e.jsx(p,{onClick:c,disabled:!h,className:"px-6 absolute bottom-6 border-2 border-typography-light dark:border-typography-dark py-1 rounded-md hover:bg-bg-dark hover:text-typography-dark dark:hover:bg-bg-light dark:hover:text-typography-light transition-colors duration-150",children:b("join")})]})},De=[{label:"Private",value:"private"},{label:"Public",value:"public"},{label:"Invite Only",value:"invite-only"}],Ve=({options:t,onChange:a})=>e.jsxs("div",{className:"relative text-typography-light ",children:[e.jsx("select",{className:"appearance-none w-full border-2 bg-bg-light dark:bg-bg-dark  text-typography-light dark:text-typography-dark  border-typography-light dark:border-typography-dark py-[0.9375rem] ps-3 rounded-md",onChange:a,children:t.map(r=>e.jsx("option",{value:r.value,children:r.label},r.label))}),e.jsx(ee,{className:"absolute top-[50%] -translate-y-[50%] right-3 pointer-events-none [&>*]:stroke-bg-dark [&>*]:dark:stroke-bg-light "})]}),$e=({setIsCreateModal:t,modalRef:a})=>{const[r,l]=i.useState("private"),[d,s]=i.useState(""),{inviteeQueryResults:n,invitees:h}=j(m=>m.teamManagement),[o,f]=i.useState(""),[u,k]=i.useState(!1),g=C(),c=j(m=>m.auth.user),x=()=>{t(!1)},v=m=>{l(m.target.value)},w=m=>{s(m.target.value)},N=()=>{s(""),l("private"),g(R()),f("")};i.useEffect(()=>{const m=a.current;return m&&m.addEventListener("close",N),()=>{m?.removeEventListener("close",N)}},[]);const T=()=>{c&&(g(ae({teamTitle:d,teamType:r,user:c,dispatch:g})).then(m=>{if(m.payload){const z=m.payload;g(re({user:c,teamID:z.id,invitees:h}))}}),g(R()),a.current?.close())};i.useEffect(()=>{$(d,k)},[d]);const y=m=>{m.preventDefault(),g(se({queryStr:o,userEmail:c?.email,userID:c?.uid})),f("")},L=()=>{n&&g(le(n)),g(ne())};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"font-medium text-xl text-center mb-6",children:b("createATeam")}),e.jsxs("div",{className:"flex flex-col items-center w-full max-w-[300px]",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-full max-w-[300px]",children:[e.jsx(E,{autoComplete:"off",id:"team-title",value:d,onChange:m=>w(m),placeholder:"Enter a name for your team",type:"text"}),e.jsx(Ve,{value:r,options:De,onChange:v}),e.jsxs("form",{onSubmit:y,id:"invitee-search",className:"grid grid-cols-3 items-center ",children:[e.jsx(E,{id:"team-search-input",className:"col-start-1 col-span-3 row-start-1 border-r-0 rounded-r-none ",value:o,onChange:m=>f(m.target.value),placeholder:"Search users by email or ID",type:"text",autoComplete:"off"}),n===null?e.jsx(p,{type:"submit",className:"bg-bg-light dark:bg-bg-dark  z-40 row-start-1 px-3  h-full border-2 border-l-0 rounded-r-lg border-typography-light dark:border-typography-dark  ",children:e.jsx(A,{className:"w-6 h-6"})}):e.jsx(p,{onClick:L,className:"bg-bg-light  z-40 row-start-1 px-3  h-full border-2 border-l-0 rounded-r-lg border-typography-light dark:border-typography-dark  ",children:e.jsx(ue,{})})]}),e.jsx(ge,{children:h.map(m=>e.jsx(fe,{onClick:()=>g(te(m)),img:m.img,name:m.displayName},m.uid))})]}),e.jsxs("div",{className:"flex flex-col items-center mt-6 gap-6",children:[e.jsx("p",{children:b("alreadyHaveATeam")}),e.jsxs(p,{onClick:x,className:"relative rounded-lg t dark:border-typography-dark after:content-[''] after:w-full after:h-px after:bg-typography-light dark:after:bg-typography-dark after:scale-x-0 hover:after:scale-x-100 after:transform after:origin-center after:transition-all duration-300 after:absolute after:top-full after:left-0",children:[b("findIt"),"!"]})]})]}),e.jsx(p,{disabled:!u||d==="",onClick:T,className:"px-6 absolute bottom-6 border-2 disabled:opacity-50 border-typography-light dark:border-typography-dark py-1 rounded-md enabled:hover:bg-bg-dark enabled:hover:text-typography-dark enabled:dark:hover:bg-bg-light enabled:dark:hover:text-typography-light transition-colors duration-150 ",children:b("create")})]})},Oe=({isCreateModal:t,setIsCreateModal:a,modalRef:r})=>e.jsx("div",{children:t?e.jsx($e,{modalRef:r,setIsCreateModal:a}):e.jsx(Fe,{modalRef:r,setIsCreateModal:a})}),Qe=[{value:"last-opened",label:"lastOpened"},{value:"newest-first",label:"newestFirst"},{value:"oldest-first",label:"oldestFirst"}],it=({title:t})=>{const a=C(),r=j(y=>y.auth.user),l=i.useRef(null),d=i.useRef(null),[s,n]=i.useState(""),[h,o]=i.useState(!1),[f,u]=i.useState(!1),{currentTeam:k}=j(y=>y.teamManagement),{t:g}=M(),c=()=>{l.current?.showModal()},x=y=>{n(y.target.value)},v=async()=>{s&&r&&(a(oe({user:r,boardTitle:s,currentTeam:r.currentSelectedTeam})).then(y=>{const L=y.payload;f&&a(ie({members:k?.members,boardID:L.id}))}),n(""),l.current?.close())},w=()=>{d.current?.showModal()},N=y=>{a(de(y.target.value))},T=()=>{n("")};return e.jsxs(e.Fragment,{children:[e.jsx(H,{clearForm:T,modalRef:l,children:e.jsx(Ae,{isChecked:f,setIsChecked:()=>u(!f),setTitle:y=>x(y),title:s,createBoard:v})}),e.jsx(H,{minHeight:"lg:min-h-[600px] max-lg:min-h-[550px]",modalRef:d,children:e.jsx(Oe,{modalRef:d,isCreateModal:h,setIsCreateModal:o})}),e.jsxs("div",{className:"grid grid-rows-2 max-md:place-items-center mt-[clamp(1.5rem,40vh,5rem)] mb-9",children:[e.jsxs("div",{className:"flex items-center w-full max-md:flex-col max-md:gap-4 justify-between",children:[e.jsx("h2",{className:"text-xl",children:t}),e.jsxs("div",{className:"flex gap-4  text-typography-light",children:[e.jsxs(p,{onClick:w,className:"flex gap-2 items-center px-2 py-3 w-max bg-primary rounded-md hover:shadow-lg transition-all duration-200 hover:shadow-primary/80",children:[e.jsx("img",{src:He,alt:""}),e.jsx("p",{children:g("joinATeam")})]}),e.jsxs(p,{onClick:c,className:"flex gap-2 items-center px-2 py-3 max-w-max bg-secondary rounded-md hover:shadow-lg transition-all duration-200 hover:shadow-secondary/80 ",children:[e.jsx("img",{src:Ee,alt:""}),e.jsx("p",{children:g("createNew")})]})]})]}),e.jsxs("div",{className:"flex gap-2 items-center mt-9",children:[e.jsx("p",{children:g("sortBy")}),e.jsx("select",{onChange:y=>N(y),className:"p-2 bg-bg-light dark:bg-bg-dark border-2 max-w-fit  border-typography-light dark:border-typography-dark rounded-md",name:"",id:"",children:Qe.map(y=>e.jsx("option",{value:y.value,children:g(y.label)},y.value))})]})]})]})},Ue=()=>e.jsx("svg",{className:"[&>*]:stroke-bg-dark dark:[&>*]:stroke-bg-light",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5.50161 12.1667H2.67195C1.62326 12.1667 1.09891 12.1667 0.988589 12.0852C0.864647 11.9937 0.834364 11.9397 0.820939 11.7863C0.808997 11.6497 1.13036 11.1238 1.77311 10.0722C2.43674 8.98625 3.00024 7.40517 3.00024 5.16667C3.00024 3.92899 3.52702 2.74201 4.4647 1.86683C5.40238 0.991667 6.67415 0.5 8.00023 0.5C9.32631 0.5 10.5981 0.991667 11.5357 1.86683C12.4735 2.74201 13.0002 3.92899 13.0002 5.16667C13.0002 7.40517 13.5637 8.98625 14.2274 10.0722C14.8701 11.1238 15.1915 11.6497 15.1796 11.7863C15.1661 11.9397 15.1358 11.9937 15.0119 12.0852C14.9016 12.1667 14.3772 12.1667 13.3286 12.1667H10.5002M5.50161 12.1667L5.50024 13C5.50024 14.3807 6.61956 15.5 8.00023 15.5C9.38098 15.5 10.5002 14.3807 10.5002 13V12.1667M5.50161 12.1667H10.5002",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round"})}),Ze=()=>e.jsxs("svg",{className:"[&>*]:stroke-bg-dark dark:[&>*]:stroke-bg-light",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.99995 16.047C9.62423 16.0383 9.04677 15.6483 8.67093 15.6483H2.29163V3.95288H8.67093C9.06963 3.95288 9.60124 4.35159 10.0393 4.35159C10.3987 4.35159 10.9303 3.95288 11.329 3.95288H17.7083V15.6483H11.329C10.9701 15.6483 10.3588 16.0552 9.99995 16.047ZM9.99995 16.047V4.75029",stroke:"#333333",strokeMiterlimit:"5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4.13486 6.09473H8.16139M4.13486 8.08454H8.16139M4.13486 10.0743H8.16139M11.8385 6.09473H15.8651M11.8385 8.08454H15.8651",stroke:"#333333",strokeMiterlimit:"5",strokeLinecap:"round",strokeLinejoin:"round"})]});function ze(t){const{t:a}=M();return e.jsxs("div",{className:"flex flex-col ",children:[e.jsxs("div",{className:"flex items-center  justify-between",children:[e.jsx("h2",{className:"font-medium",children:a("notifications")}),e.jsx(p,{className:"",onClick:t.onClick,children:e.jsx(Ce,{})})]}),e.jsxs(p,{className:"flex items-center  gap-2 mt-4",children:[e.jsx(Ze,{}),e.jsx("p",{children:a("markAllAsRead")})]})]})}const We=({notificationText:t,teamID:a,userUID:r,notificationID:l})=>{const d=C();return e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("p",{children:t}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{onClick:()=>{V(a,r),d(F({notificationID:l}))},className:" bg-secondary dark:text-typography-light min-w-[60px] p-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-150",children:"Accept"}),e.jsx(p,{onClick:()=>d(F({notificationID:l})),className:"border-2 border-typography-light dark:border-typography-dark rounded-lg min-w-[60px]   shadow-lg hover:shadow-xl transition-all duration-150",children:"Deny"})]})]})},qe=({notificationText:t,userUID:a,teamID:r,type:l,notificationID:d})=>e.jsx("div",{className:"flex flex-col",children:l==="invitation"&&e.jsx(We,{notificationID:d,notificationText:t,teamID:r,userUID:a,type:l})});function S(t,a,r){a.current&&!a.current.contains(t.target)&&r()}const Pe=({isContainerOpened:t,closeContainer:a})=>{const r=i.useRef(null),{notifications:l}=j(n=>n.notificationManagement),d=C(),s=j(n=>n.auth.user);return i.useEffect(()=>{if(s){const n=d(ce(s.uid));return()=>n()}},[]),i.useEffect(()=>(document.addEventListener("mousedown",n=>{S(n,r,a)}),()=>document.removeEventListener("mousedown",n=>{S(n,r,a)})),[]),e.jsxs("aside",{ref:r,className:`bg-primary max-lg:max-w-[70%]  dark:bg-primary-dark fixed h-screen flex flex-col justify-between w-full drop-shadow-2xl max-w-[350px] z-10 right-0 top-0 ${t?"translate-x-0":"translate-x-full"} transition-all duration-150 ease-in `,children:[e.jsxs("div",{className:"p-4",children:[e.jsx(ze,{onClick:a}),l.map(n=>{const h=n.receiversID.find(o=>o===s?.uid);return e.jsx(qe,{type:n.type,notificationText:n.notificationText,notificationID:n.id,teamID:n.teamID,userUID:h},n.id)})]}),e.jsx("div",{className:" p-4 border-t-2 border-typography-light/30 dark:border-typography-dark/30",children:e.jsx(p,{className:"",children:b("viewAllNotifications")})})]})},Je=({quantity:t})=>e.jsx("div",{className:"absolute right-[70%] pointer-events-none top-1/2 bg-danger flex items-center justify-center rounded-full text-typography-dark text-xs w-4 h-4",children:e.jsx("span",{children:t})}),Z=({isHidden:t})=>e.jsx(p,{onClick:()=>{},className:`capitalize px-2 py-1 ${t}  text-typography-light bg-secondary  rounded-lg  `,children:"upgrade"}),dt=()=>{const t=C(),[a,r]=i.useState(!1),l=j(o=>o.auth.user?.plan),{notifications:d}=j(o=>o.notificationManagement),s=()=>{r(!0)},n=()=>{r(!1)},h=()=>{t(I(!0))};return e.jsxs("nav",{className:"flex justify-between relative max-[400px]:justify-center max-md:gap-4  w-full  items-center ps-9 max-md:ps-2 py-2  dark:text-typography-dark text-typography-light  rounded-md ",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(p,{onClick:h,className:"lg:hidden",children:e.jsx(O,{})}),e.jsx(B,{className:"text-xl",to:"/app/dashboard",children:"Artiflare"}),e.jsx("p",{className:"uppercase rounded-lg bg-primary dark:bg-primary-dark  dark:text-typography-dark text-typography-light px-4 py-1",children:l})]}),e.jsxs("div",{className:"flex items-center gap-6 ",children:[l==="free"&&e.jsx(Z,{isHidden:"max-md:hidden"}),e.jsxs("div",{className:"flex gap-4 items-center justify-center",children:[e.jsxs("div",{className:"flex items-center justify-center relative ",children:[e.jsx(p,{ariaLabel:"Open notifications",onClick:s,className:"w-8 ",children:e.jsx(Ue,{})}),d.length>0&&e.jsx(Je,{quantity:d.length})]}),e.jsx(he,{})]})]}),e.jsx(Pe,{closeContainer:n,isContainerOpened:a})]})},Ye=()=>e.jsx("svg",{className:"[&>*]:fill-bg-dark [&>*]:dark:fill-bg-light",width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M0 6.85714V17.1429H5.71429V12.5714C5.71429 11.3091 6.73763 10.2857 8 10.2857C9.26237 10.2857 10.2857 11.3091 10.2857 12.5714V17.1429H16V6.85714L8 0L0 6.85714Z",fill:"#333333"})}),Xe=()=>e.jsx("svg",{className:"[&>*]:fill-bg-dark [&>*]:dark:fill-bg-light",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 0C3.58962 0 0 3.58962 0 8C0 12.4104 3.58962 16 8 16C12.4104 16 16 12.4104 16 8C16 3.58962 12.4104 0 8 0ZM8 1.33333C11.6898 1.33333 14.6667 4.31021 14.6667 8C14.6667 11.6898 11.6898 14.6667 8 14.6667C4.31021 14.6667 1.33333 11.6898 1.33333 8C1.33333 4.31021 4.31021 1.33333 8 1.33333ZM8 2.66667C7.63067 2.66667 7.33333 2.964 7.33333 3.33333V8C7.33333 8.36933 7.63067 8.66667 8 8.66667H12.6667C13.036 8.66667 13.3333 8.36933 13.3333 8C13.3333 7.63067 13.036 7.33333 12.6667 7.33333H8.66667V3.33333C8.66667 2.964 8.36933 2.66667 8 2.66667Z",fill:"#333333"})}),_e=()=>{const{t}=M();return e.jsxs("section",{className:"flex flex-col gap-2",children:[e.jsxs(B,{className:"flex items-center gap-2",to:"/app/dashboard",children:[e.jsx(Ye,{}),e.jsx("p",{children:t("home")})]}),e.jsxs(B,{className:"flex items-center gap-2",to:"/app/recent",children:[e.jsx(Xe,{}),e.jsx("p",{children:t("recent")})]}),e.jsxs(B,{className:"flex items-center gap-2",to:"/app/favorites",children:[e.jsx(Q,{}),e.jsx("p",{children:t("favorites")})]})]})},Ge=({placeholder:t,onChange:a,value:r})=>e.jsxs("div",{className:"relative ",children:[e.jsx("input",{placeholder:t,onChange:a,value:r,className:"bg-transparent text-typography-light dark:text-typography-dark border-2 py-1 border-typography-light dark:border-typography-dark rounded-md flex-row-reverse flex  outline-none ps-8",type:"text"}),e.jsx(A,{className:"w-4 absolute top-[50%] left-2 -translate-y-[50%]"})]}),ct=()=>{const t=i.useRef(null),{boardSearchQuery:a}=j(u=>u.boards),r=C(),{isMobileSidebarOpened:l}=j(u=>u.miscStates),{user:d}=j(u=>u.auth),{t:s}=M(),n=pe(),h=u=>{r(xe(u.target.value))},o=()=>{r(I(!1))},f=window.innerWidth;return i.useEffect(()=>{f>768&&!l&&r(I(!0))},[f,l,r]),i.useEffect(()=>(document.addEventListener("mousedown",u=>{S(u,t,o)}),()=>{document.removeEventListener("mousedown",u=>{S(u,t,o)})}),[]),i.useEffect(()=>{f<1024&&r(I(!1))},[n]),e.jsx("aside",{ref:t,className:`w-full max-lg:absolute max-lg:z-40 max-lg:top-0 ${l?"left-0 ":"-left-[1000px]"} h-screen py-9 px-4 min-w-fit max-w-[230px] bg-primary dark:bg-primary-dark dark:text-typography-dark border-r-2 border-r-typography-light min-h-[100dvh] relative transition-all duration-150 h- `,children:e.jsxs("div",{className:"gap-[clamp(1rem,40vh,5rem)] h-full flex flex-col relative",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(p,{onClick:o,className:"lg:hidden",children:e.jsx(O,{})}),e.jsx(Ge,{placeholder:s("searchByTitle"),onChange:u=>h(u),value:a})]}),e.jsx(_e,{}),e.jsxs("div",{className:"absolute bottom-8 left-0 flex gap-2 items-center",children:[e.jsx(ve,{}),d?.plan==="free"&&e.jsx(Z,{isHidden:"md:hidden"})]})]})})};export{it as B,ct as D,dt as H,nt as a,ot as b};
