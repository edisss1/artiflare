import{j as e,t as n,u,a as p,F as j,B as d,p as v,q as y,v as N,w,x as k,y as g,r as x}from"./index-ChT_ZIC7.js";import{S as f,f as C,A as I,C as M,U as S}from"./UserCard-BVNH5PxE.js";import{F as D}from"./FallbackAvatar-CZd8nXZJ.js";import{M as F}from"./Modal-axEZC8xA.js";import{o as A}from"./openModal-C62Avi1l.js";const R=({query:t,setQuery:a})=>e.jsxs("div",{className:"mx-8 mt-5 w-full max-w-[270px] flex gap-2 items-center relative after:w-full after:scale-0 after:absolute after:h-[2px] after:bg-bg-dark dark:after:bg-bg-light after:top-[140%] after:left-0 focus-within:after:scale-100 after:transition-all after:duration-200 after:origin-bottom",children:[e.jsx(f,{className:"w-[20px] h-[20px] [&>*]:dark:fill-bg-light"}),e.jsx("input",{onChange:s=>a(s.target.value),value:t,id:"member-search",placeholder:"Search member by name ",type:"text",className:"relative bg-transparent outline-none w-full  "}),e.jsx("label",{htmlFor:"member-search",className:"sr-only",children:"Search team members"})]}),T=({teamMembers:t,query:a})=>e.jsxs("div",{className:"flex flex-col gap-4 mx-8 my-8   max-lg:min-h-[500px] lg:max-h-[500px] overflow-y-auto custom-scrollbar-modal",children:[e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsx("h3",{children:n("name")}),e.jsx("h3",{children:n("role")}),e.jsx("h3",{children:n("lastAccess")})]}),t&&t.filter(s=>a.toLowerCase()===""?s:s.displayName?.toLowerCase().includes(a.toLowerCase())).map(s=>e.jsxs("div",{className:"grid grid-cols-3 items-center ",children:[e.jsxs("div",{className:"flex max-md:flex-col max-lg:items-start items-center gap-2",children:[s.img?e.jsx("img",{className:"w-8 h-8 rounded-full",src:s.img,alt:""}):e.jsx(D,{width:"w-8",height:"h-8",rounded:"rounded-full",username:s.displayName||s.email}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-sm",children:s.displayName}),e.jsx("p",{className:"text-xs truncate max-w-[90px]",children:s.email})]})]}),e.jsx("div",{className:"col-start-2",children:e.jsx("span",{className:"capitalize",children:s.role})}),e.jsx("div",{className:"col-start-3",children:e.jsx("span",{children:C(s.lastAccessAt)})})]},s.uid))]}),Q=({className:t})=>e.jsx("svg",{className:`${t} [&>*]:stroke-bg-dark dark:[&>*]:stroke-bg-light`,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M16.6668 15H11.6668M14.1668 12.5V17.5M3.3335 17.5C3.3335 14.2783 5.94517 11.6667 9.16683 11.6667C9.746 11.6667 10.3054 11.7511 10.8335 11.9082M12.5002 5.83333C12.5002 7.67428 11.0077 9.16667 9.16683 9.16667C7.32588 9.16667 5.8335 7.67428 5.8335 5.83333C5.8335 3.99238 7.32588 2.5 9.16683 2.5C11.0077 2.5 12.5002 3.99238 12.5002 5.83333Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round"})}),L=({modalRef:t,query:a,setQuery:s})=>{const l=u(),{user:i}=p(r=>r.auth),{inviteeQueryResults:o,invitees:c}=p(r=>r.teamManagement),m=r=>{r.preventDefault(),l(y({queryStr:a,userEmail:i?.email,userID:i?.uid})),s("")},h=()=>{o&&l(N(o)),l(w())},b=()=>{l(k({user:i,teamID:i?.currentSelectedTeam,invitees:c})),t.current?.close(),l(g())};return e.jsxs("div",{className:"grid place-items-center gap-8 h-[calc(100%)]",children:[e.jsxs("div",{className:"max-w-[60%]  w-full mx-auto  ",children:[e.jsx("h2",{className:"text-center mb-4 text-xl",children:"Invite new users"}),e.jsxs("form",{onSubmit:m,id:"invitee-search",className:"grid grid-cols-3 items-center ",children:[e.jsx(j,{id:"user-search-input",className:"col-start-1 col-span-3 row-start-1 border-r-0 rounded-r-none ",value:a,onChange:r=>s(r.target.value),placeholder:"Search users by email or ID",type:"text",autoComplete:"off"}),o===null?e.jsx(d,{type:"submit",className:"bg-bg-light dark:bg-bg-dark  z-40 row-start-1 px-3  h-full border-2 border-l-0 rounded-r-lg border-typography-light dark:border-typography-dark  ",children:e.jsx(f,{className:"w-6 h-6 "})}):e.jsx(d,{onClick:h,className:"bg-bg-light  z-40 row-start-1 px-3  h-full border-2 border-l-0 rounded-r-lg border-typography-light dark:border-typography-dark  ",children:e.jsx(I,{})})]}),e.jsx(M,{children:c.map(r=>e.jsx(S,{onClick:()=>l(v(r)),img:r.img,name:r.displayName},r.uid))})]}),e.jsx(d,{onClick:b,className:"border-2  max-w-[60%] w-full py-3 border-secondary rounded-lg hover:bg-secondary dark:hover:text-typography-light transition-colors duration-150",children:"Send invites"})]})},U=()=>{const t=u(),{currentTeam:a}=p(h=>h.teamManagement),s=x.useRef(null),[l,i]=x.useState(""),[o,c]=x.useState(""),m=()=>{c(""),t(g())};return e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"px-4 pt-4 flex items-center gap-6 mb-8",children:[e.jsx("h2",{children:n("members")}),e.jsxs(d,{onClick:()=>A(s),className:"flex gap-2 items-center group border-2 border-secondary rounded-lg hover:bg-secondary dark:hover:text-typography-light transition-colors duration-150 px-2 py-2",children:[e.jsx(Q,{className:"group-hover:[&>*]:stroke-bg-dark transition-colors duration-150"}),e.jsx("p",{children:n("inviteNewUsers")})]})]}),e.jsx("div",{className:"w-full flex items-center text-typography-light bg-secondary px-4 py-2",children:e.jsxs("p",{className:"flex gap-2",children:[a?.members.length,e.jsx("span",{children:a&&a.members.length===1?n("memberInTeam"):n("membersInTeamPlural")})]})}),e.jsx(R,{query:l,setQuery:i}),e.jsx(T,{query:l,teamMembers:a?.members}),e.jsx(F,{maxHeight:"max-h-[450px] h-full",minHeight:"min-h-[400px]",modalRef:s,clearForm:m,children:e.jsx(L,{query:o,setQuery:c,modalRef:s})})]})};export{U as default};
